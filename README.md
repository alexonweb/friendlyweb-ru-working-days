# Производственный календарь

В календаре содержится информация о выходных, сокращенных и празднечных днях. Календарь состоит из данных в формате JSON и *обработчика*.
*Обработчик* позволяет узнать является ли дата выходным днем.

## Использование

### Подключение обработчика

*Определяем* **class WorkingDays** 

```
require 'FriendlyWeb/WorkingDays/WorkingDays.php';

$workingdays = new FriendlyWeb\WorkingDays();
```

### Методы

#### Установка даты

```
setDay( *string $format [, int $timestamp = time() ]* )
```

Дата *$format* устанавливается в формате `date` PHP. Например, `$workingdays->setDay("2022-03-08");`
По-умолчанию устанавливается сегоднящний день.

#### Установка директории календарей

```
setCalendarDir( string $dir )
```

По-умолчанию директория установлена как `./data/russian/`.

#### Проверяем праздник

```
isHoliday()
```

Метод возвращает `true`, если в установленный день (*setDay*) есть праздник.

#### Проверяем сокращенный день

```
isPreHoliday()
```

Метод возвращает `true`, если установленный день (*setDay*) сокращен на час.

#### Описание праздника

```
getHolidayDescription()
```

Возвращает *string* для установленной даты. Если данные о названии праздника отсутствуют, метод возвращает фразу "*Выходной день*".

## Примеры

*Класс определён* (см. *Подключение обработчика*)

### Сегоднящний день

```
echo 'Сегодня ';

if ( $workingdays->isHoliday() ) {

    echo "выходной (" . $workingdays->getHolidayDescription() . ")";

} elseif ( $workingdays->isPreHoliday() ) {

    echo "сокращенный день";

} else {

    echo "рабочий день";

}
```

### Точная дата

```
$workingdays->setDay('2022-03-08'); // Устанавливаем дату

echo '8 марта, 2022 - ';

if ( $workingdays->isHoliday() ) {

    echo 'выходной (' . $workingdays->getHolidayDescription() . ')';

} elseif ( $workingdays->isPreHoliday() ) {

    echo 'сокращенный день';

} else {

    echo 'рабочий день';

}
```


## Календарь в формате JSON 

Календари могут хранится в любой директории. Для установки директории используйте метод `setCalendarDir()`.

Имя файла календаря должно соотвествовать году для календаря **{год}.json** (например, "*2017.json*", "*2018.json*").


### Пример формата календаря 

```
{
    "January": 
    {
        "1-6":  
        {
            "rest": true, 
            "n": "Новый год"
        },
        "7":    {"rest": true, "n": "Рождество Христово"}
    },

    "June": 
    {
        "10":   {"rest": false},
        "12":   {"rest": true, "n": "День России"}
    }

}
```

Месяц записывается в формате PHP date `date("F");` (*от January до December*).

Дни могут записываться в формате диапазона "*1-6*". В качестве разделителя используется знак минус `-`.

Для дня или диапазона дней возможны два варианта обозначения: *выходной день* или *сокращенный день*. Выходной день обозначается присваиванием значения *true* к объекту **rest** для текущего дня или диапазона дней. Сокращенный же день обозначается присваиваем значения *false*.

Например, запись `"rest": true` обзначает, что в этот день (*или диапазон дней*) выходной, а запись `"rest": false` говорит о том, что рабочий день сокращен на один час. 

Объект `n` (от *note*) используется для описания праздника. Если объект `n` для выходного дня отсутвует программа по-умолчанию присвоит значение *Выходной день*.

## Лицензия

Программа распространяется по лицензии MIT.